# 萤火广告系统 0-1 b 端系统建设

## 项目背景

随着 XX 公司在过去几个月中日活跃用户数的持续稳健增长，我们迎来了一个重要的转折点——开启商业化的步伐。为了最大化利用这一庞大的用户基础，我们计划逐步拓展广告业务，旨在为用户提供更加丰富的内容体验的同时，也为合作伙伴创造新的价值。

在此大背景下，技术线开启名为萤火计划的广告系统从 0 到 1 项目。项目总体划分为 B 端和 C 端两部份，在本阶段主要聚焦于服务于广告主的**B 端**系统能力建设，以期在一到两月的有限时间内能够实现广告主入驻，下单投放，计费结算的基本广告能力。

## 安装 & 运行

1. 使用 pnpm 包管理器安装 `pnpm install`
2. 首先运行 mongodb 内存服务器 `pnpm -F api dev-db`
3. 然后运行后端 `pnpm -F api db`
4. 最后运行前端 `pnpm -F web dev`

## 工作内容

### 一阶段：用户/机构管理模块搭建，物料以及审核模块搭建

1. 搭建用户/机构管理模块，能够实现用户注册/登陆 - 机构入驻 - 提交资质审核 -入驻成功的完整流程。
2. 权限管理能力建设，机构下账户分为管理员和运营角色，以及萤火平台专有的小二角色。小二登陆萤火系统后可以审批机构上传的资质材料。
3. 物料以及审核模块搭建，物料模块能够存储机构上传资质文件。机构上传资质文件后自动生成机构资质审核工单，由小二登陆后对工单进行审批。
4. 此阶段包括前端 web0-1 建设，后端服务 0-1 开发以及数据库 0-1 建设。

### 二阶段：资金模块搭建，计划/单元/创意三段式广告投放能力搭建

1. 资金模块搭建，并且新增平台财务角色，在机构对公司账户打款完成后，财务能够提交充值工单，在小二审批通过后对机构账户余额进行调整。
2. 广告计划管理能力搭建，机构下账户能够创建/管理投放计划，指定具体投放时间，地域定向，年龄/性别定向，人群特征定向等。机构管理员能够对各计划分配具体预算。
3. 广告单元管理能力搭建，单个投放计划下可以创建多个投放单元，用以对具体投放内容进行分类投放单元可以设置预期曝光量。
4. 广告创意管理能力，单个投放单元下可以创建多个创意，创建创意需要绑定创意模版，并且上传对应物料，创意创建完毕后自动创建创意审核工单，由平台小二审核通过后即为生效状态。
5. 创意模版能力建设，创意模版为创意最终展现给用户的样式，需要指定所需元素格式和内容，在商家完成物料上传后能够提供效果预览。
6. 审核模块增加创意审核能力，由小二登陆平台后对工单进行审批。

### 三阶段：投放管理，数据报告能力建设

1. 投放管理能力建设，广告主能够对投放中的单元/创意进行暂停，并且能够对创意进行编辑，创意编辑后会自动暂停并且生成创意审核工单。
2. 创意模版上绑定刊例价，根据实时曝光进度进行实时结算。
3. 支持广告主在创意上绑定三方监测链接。
4. 数据报表能力建设，广告主能够查看所有在投计划/单元/创意的实时消耗进度，点击率等信息，以及历史计划/单元/创意的投放情况。
5. 广告主可以对选定计划/单元进行数据导出操作，生成 xml 文件。

### 四阶段：通用渲染组件能力建设，openApi 能力建设

1. 建设通用化的 web 前端广告渲染组件，能够通过 c 端返回的广告内容，创意模版等在 web 端实现创意渲染。
2. 前端渲染组件能够在用户曝光/点击等行为进行埋点上报到萤火广告平台 gateway，并且能够对广告主提交的三方监测链接进行三方埋点上报。
3. openAPI 能力建设，允许广告主通过 api 的方式进行计划/单元/创意创建以及物料上传。
